(this["webpackJsonpaliens-go-home"]=this["webpackJsonpaliens-go-home"]||[]).push([[0],{57:function(t,e,n){},93:function(t,e,n){"use strict";n.r(e);var i,r,a=n(1),o=n(17),c=n.n(o),s=(n(57),n(2)),l=n(44),u=n(45),x=n(18),j=n(52),d=n(50),y=function(t){var e=t.initialAxis,n=t.initialControlPoint,i=t.endingControlPoint,r=t.endingAxis;return"\n        M".concat(e.x," ").concat(e.y,"\n        c ").concat(n.x," ").concat(n.y,"\n        ").concat(i.x," ").concat(i.y,"\n        ").concat(r.x," ").concat(r.y,"\n    ")},f=function(t){return 180*t/Math.PI},h=function(t,e,n,i){if(n>=0&&i>=0)return 90;if(n<0&&i>=0)return-90;var r=(n-t)/(i-e);return-1*f(Math.atan(r))},b=function(t){return t*Math.PI/180},p=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,r=-1*n+90,a=f(Math.cos(b(r)))/i,o=f(Math.sin(b(r)))/i;return{x:t+a,y:e-o}},O=n(0),g=function(t){var e={fill:"#a16012",stroke:"#75450e",strokeWidth:"2px"},n={initialAxis:{x:-40,y:60},initialControlPoint:{x:20,y:-60},endingControlPoint:{x:60,y:-60},endingAxis:{x:80,y:0}};return Object(O.jsxs)("g",{children:[Object(O.jsx)("path",{style:e,d:y(n)}),Object(O.jsx)("line",{x1:-40,y1:60,x2:40,y2:60,style:e})]})},m=function(t){var e={fill:"#999",stroke:"#666",strokeWidth:"2px"},n="rotate(".concat(t.rotation,", 0, 0)"),i={initialAxis:{x:-20,y:-70},initialControlPoint:{x:-40,y:170},endingControlPoint:{x:80,y:170},endingAxis:{x:40,y:0}};return Object(O.jsxs)("g",{transform:n,children:[Object(O.jsx)("path",{style:e,d:y(i)}),Object(O.jsx)("line",{x1:-20,y1:-70,x2:20,y2:-70,style:e})]})},v=5e3,P=[-300,-150,150,300],k=function(){return Object(O.jsxs)("g",{id:"ground",children:[Object(O.jsx)("rect",{id:"ground-2","data-name":"ground",style:{fill:"#59a941"},x:-2500,y:0,width:v,height:100}),Object(O.jsx)("line",{x1:-2500,y1:0,x2:2500,y2:0,style:{stroke:"#458232",strokeWidth:"3px"}})]})},S=function(){return Object(O.jsx)("rect",{style:{fill:"#30abef"},x:-2500,y:-1100,width:v,height:1200})},w=function(t){return Object(O.jsx)("ellipse",{style:{fill:"#777",stroke:"#444",strokeWidth:"2px"},cx:t.position.x,cy:t.position.y,rx:"16",ry:"16"})},A=function(t){return Object(O.jsx)("g",{filter:"url(#shadow)",children:Object(O.jsx)("text",{style:{fontFamily:'"Joti One", cursive',fontSize:80,fill:"#d6d33e"},x:"500",y:"80",children:t.score})})},C=n(25),D=function(t){return Object(O.jsx)("ellipse",{cx:t.position.x,cy:t.position.y,rx:"40",ry:"10",style:{fill:"#979797",stroke:"#5c5c5c"}})},M=function(t){var e={initialAxis:{x:t.position.x-20,y:t.position.y},initialControlPoint:{x:10,y:-25},endingControlPoint:{x:30,y:-25},endingAxis:{x:40,y:0}};return Object(O.jsx)("path",{style:{fill:"#b6b6b6",stroke:"#7d7d7d"},d:y(e)})},T=n(26),E=Object(T.b)(i||(i=Object(C.a)(["\n    0%{\n        transform: translateY(0);\n    }\n    100%{\n        transform: translateY(","px);\n    }\n"])),1200),I=T.a.g(r||(r=Object(C.a)(["\n    animation: "," 4s linear;\n"])),E),_=function(t){return Object(O.jsxs)(I,{children:[Object(O.jsx)(D,{position:t.position}),Object(O.jsx)(M,{position:t.position})]})},B=function(t){var e={fill:"#da0d15",stroke:"#a51708",strokeWidth:"2px"},n={initialAxis:{x:t.position.x,y:t.position.y},initialControlPoint:{x:-20,y:-20},endingControlPoint:{x:-40,y:10},endingAxis:{x:0,y:40}},i={initialAxis:{x:t.position.x,y:t.position.y},initialControlPoint:{x:20,y:-20},endingControlPoint:{x:40,y:10},endingAxis:{x:0,y:40}};return Object(O.jsxs)("g",{filter:"url(#shadow)",children:[Object(O.jsx)("path",{style:e,d:y(n)}),Object(O.jsx)("path",{style:e,d:y(i)})]})},G=function(t){var e={x:-400,y:-280,width:800,height:200,rx:10,ry:10,style:{fill:"transparent",cursor:"pointer"},onClick:t.onClick},n={textAnchor:"middle",x:0,y:-150,style:{fontFamily:'"Joti One", cursive',fontSize:60,fill:"#e3e3e3",cursor:"pointer"},onClick:t.onClick};return Object(O.jsxs)("g",{filter:"url(#shadow)",children:[Object(O.jsx)("rect",Object(s.a)({},e)),Object(O.jsx)("text",Object(s.a)(Object(s.a)({},n),{},{children:"Tap To Start!"}))]})},F=function(){var t={fontFamily:'"Joti One", cursive',fontSize:120,fill:"#cbca62"},e={initialAxis:{x:-190,y:-950},initialControlPoint:{x:95,y:-50},endingControlPoint:{x:285,y:-50},endingAxis:{x:380,y:0}},n=Object(s.a)(Object(s.a)({},e),{},{initialAxis:{x:-250,y:-780},initialControlPoint:{x:125,y:-90},endingControlPoint:{x:375,y:-90},endingAxis:{x:500,y:0}});return Object(O.jsxs)("g",{filter:"url(#shadow)",children:[Object(O.jsxs)("defs",{children:[Object(O.jsx)("path",{id:"AliensPath",d:y(e)}),Object(O.jsx)("path",{id:"GoHomePath",d:y(n)})]}),Object(O.jsx)("text",Object(s.a)(Object(s.a)({},t),{},{children:Object(O.jsx)("textPath",{xlinkHref:"#AliensPath",children:"Aliens,"})})),Object(O.jsx)("text",Object(s.a)(Object(s.a)({},t),{},{children:Object(O.jsx)("textPath",{xlinkHref:"#GoHomePath",children:"Go Home!"})}))]})},L=function(t){var e={x:-300,y:-600,width:600,height:300,style:{fill:"transparent",cursor:"pointer"},onClick:t.authenticate},n={textAnchor:"middle",x:0,y:-440,style:{fontFamily:'"Joti One", cursive',fontSize:45,fill:"#e3e3e3",cursor:"pointer"},onClick:t.authenticate};return Object(O.jsxs)("g",{filter:"url(#shadow)",children:[Object(O.jsx)("rect",Object(s.a)({},e)),Object(O.jsx)("text",Object(s.a)(Object(s.a)({},n),{},{children:"Login to participate!"}))]})},W=function(t){var e=t.position,n=e.x,i=e.y,r="rect"+t.player.rank,a="clip"+t.player.rank,o={fontFamily:'"Joti One", cursive',fontSize:35,fill:"#e3e3e3",cursor:"default"};t.player.currentPlayer&&(o.fill="#e9ea64");var c={style:{height:60,width:60},x:n-140,y:i-40,href:t.player.picture,clipPath:"url(#".concat(a,")")},l={width:55,height:55,rx:30,x:c.x,y:c.y};return Object(O.jsxs)("g",{children:[Object(O.jsxs)("defs",{children:[Object(O.jsx)("rect",Object(s.a)({id:r},l)),Object(O.jsx)("clipPath",{id:a,children:Object(O.jsx)("use",{xlinkHref:"#"+r})})]}),Object(O.jsx)("use",{xlinkHref:"#"+r,strokeWidth:"2",stroke:"black"}),Object(O.jsxs)("text",{filter:"url(#shadow)",style:o,x:n-200,y:i,children:[t.player.rank,"\xba"]}),Object(O.jsx)("image",Object(s.a)({},c)),Object(O.jsx)("text",{filter:"url(#shadow)",style:o,x:n-60,y:i,children:t.player.name}),Object(O.jsx)("text",{filter:"url(#shadow)",style:o,x:n+350,y:i,children:t.player.maxScore})]})},z=function(t){var e=t.leaderboard||[];return e=e.sort((function(t,e){return t.maxScore===e.maxScore?t.name<=e.name?1:-1:t.maxScore<e.maxScore?1:-1})).map((function(e,n){return Object(s.a)(Object(s.a)({},e),{},{rank:n+1,currentPlayer:e.id===t.currentPlayer.id})})).filter((function(e,n){return n<3||e.id===t.currentPlayer.id?e:null})),Object(O.jsxs)("g",{children:[Object(O.jsx)("text",{filter:"url(#shadow)",style:{fontFamily:'"Joti One", cursive',fontSize:50,fill:"#88da85",cursor:"default"},x:"-150",y:"-630",children:"Leaderboard"}),Object(O.jsx)("rect",{style:{fill:"transparent",stroke:"black",strokeDasharray:"15"},x:"-350",y:"-600",width:"700",height:"330"}),t.currentPlayer&&e.map((function(t,e){var n={x:-100,y:70*e-530};return Object(O.jsx)(W,{player:t,position:n},t.id)})),!t.currentPlayer&&Object(O.jsx)(L,{authenticate:t.authenticate})]})};z.defaultProps={currentPlayer:null,leaderboard:null};var H=z,J=n(8),R=function(t){for(var e=[window.innerWidth/-2,-1100,window.innerWidth,1200],n=[],i=0;i<t.gameState.lives;i++){var r={x:-180-70*i,y:35};n.push(Object(O.jsx)(B,{position:r},i))}return Object(O.jsxs)("svg",{id:"aliens-go-home-canvas",preserveAspectRatio:"xMaxYMax none",viewBox:e,onMouseMove:t.trackMouse,onClick:t.shoot,children:[Object(O.jsx)("defs",{children:Object(O.jsx)("filter",{id:"shadow",children:Object(O.jsx)("feDropShadow",{dx:"1",dy:"1",stdDeviation:"2"})})}),Object(O.jsx)(S,{})," ",Object(O.jsx)(k,{}),t.gameState.cannonBalls.map((function(t){return Object(O.jsx)(w,{position:t.position},t.id)})),Object(O.jsx)(m,{rotation:t.angle}),Object(O.jsx)(g,{}),Object(O.jsx)(A,{score:t.gameState.kills}),!t.gameState.started&&Object(O.jsxs)("g",{children:[Object(O.jsx)(G,{onClick:function(){return t.startGame()}}),Object(O.jsx)(F,{}),Object(O.jsx)(H,{currentPlayer:t.currentPlayer,authenticate:J.signIn,leaderboard:t.players})]}),t.gameState.flyingObjects.map((function(t){return Object(O.jsx)(_,{position:t.position},t.id)})),n]})};R.defaultProps={currentPlayer:null,players:null};var N=R,V=n(49),X=n.n(V);J.configure({domain:"dev-x2zn23xz.us.auth0.com",clientID:"an2POIWVK1yHxQliKyyxZMCdxAx1cFb3",redirectUri:"https://www.chasemalcom.com/AlienGame/",responseType:"token id_token",scope:"openid profile manage:points",audience:"https://chasemalcom.com/AlienGame/"});var Y=function(t){Object(j.a)(n,t);var e=Object(d.a)(n);function n(t){var i;return Object(l.a)(this,n),(i=e.call(this,t)).shoot=i.shoot.bind(Object(x.a)(i)),i.socket=null,i.currentPlayer=null,i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=this;J.handleAuthCallback(),J.subscribe((function(n){n&&(e.playerProfile=J.getProfile(),e.currentPlayer={id:e.playerProfile.sub,maxScore:0,name:e.playerProfile.name,picture:e.playerProfile.picture},t.props.loggedIn(e.currentPlayer),e.socket=X()("https://aliens-go-home-server.herokuapp.com/",{query:"token=".concat(J.getAccessToken())}),e.socket.on("players",(function(n){t.props.leaderboardLoaded(n),n.forEach((function(t){t.id===e.currentPlayer.id&&(e.currentPlayer.maxScore=t.maxScore)}))})))})),setInterval((function(){e.props.moveObjects(e.canvasMousePosition)}),10),window.onresize=function(){var t=document.getElementById("aliens-go-home-canvas");t.style.width="".concat(window.innerWidth,"px"),t.style.height="".concat(window.innerHeight,"px")},window.onresize()}},{key:"componentWillReceiveProps",value:function(t){!t.gameState.started&&this.props.gameState.started&&this.currentPlayer.maxScore<this.props.gameState.kills&&this.socket.emit("new-max-score",Object(s.a)(Object(s.a)({},this.currentPlayer),{},{maxScore:this.props.gameState.kills}))}},{key:"trackMouse",value:function(t){this.canvasMousePosition=function(t){var e=document.getElementById("aliens-go-home-canvas"),n=e.createSVGPoint();n.x=t.clientX,n.y=t.clientY;var i=n.matrixTransform(e.getScreenCTM().inverse());return{x:i.x,y:i.y}}(t)}},{key:"shoot",value:function(){this.props.shoot(this.canvasMousePosition)}},{key:"render",value:function(){var t=this;return Object(O.jsx)(N,{angle:this.props.angle,currentPlayer:this.props.currentPlayer,gameState:this.props.gameState,players:this.props.players,startGame:this.props.startGame,trackMouse:function(e){return t.trackMouse(e)},shoot:this.shoot})}}]),n}(a.Component);Y.defaultProps={currentPlayer:null,players:null};var U=Y,K=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,94)).then((function(e){var n=e.getCLS,i=e.getFID,r=e.getFCP,a=e.getLCP,o=e.getTTFB;n(t),i(t),r(t),a(t),o(t)}))},q=n(19),Q=n(51),Z="MOVE_OBJECTS",$="START_GAME",tt="LEADERBOARD_LOADED",et="LOGGED_IN",nt="SHOOT",it=Object(q.b)((function(t){return{angle:t.angle,gameState:t.gameState,currentPlayer:t.currentPlayer,players:t.players}}),(function(t){return{moveObjects:function(e){t(function(t){return{type:Z,mousePosition:t}}(e))},startGame:function(){t({type:$})},leaderboardLoaded:function(e){t(function(t){return{type:tt,players:t}}(e))},loggedIn:function(e){t(function(t){return{type:et,player:t}}(e))},shoot:function(e){t(function(t){return{type:nt,mousePosition:t}}(e))}}}))(U),rt=n(11),at=function(t){return t.filter((function(t){return t.position.y>-1e3&&t.position.x>-500&&t.position.x<500})).map((function(t){var e=t.position,n=e.x,i=e.y,r=t.angle;return Object(s.a)(Object(s.a)({},t),{},{position:p(n,i,r,5)})}))},ot=function(t,e){var n=[];return e.forEach((function(e){var i=(new Date).getTime()-e.createdAt,r=e.position.x,a=e.position.y+i/4e3*1200,o={x1:r-40,y1:a-10,x2:r+40,y2:a+10};t.forEach((function(t){var i={x1:t.position.x-8,y1:t.position.y-8,x2:t.position.x+8,y2:t.position.y+8};(function(t,e){return t.x1<e.x2&&t.x2>e.x1&&t.y1<e.y2&&t.y2>e.y1})(o,i)&&n.push({cannonBallId:t.id,flyingDiscId:e.id})}))})),n};var ct=function(t,e){if(!t.gameState.started)return t;var n=at(t.gameState.cannonBalls),i=e.mousePosition||{x:0,y:0},r=function(t){if(!t.gameState.started)return t;var e=(new Date).getTime(),n=t.gameState,i=n.lastObjectCreatedAt,r=n.flyingObjects;if(!(e-i.getTime()>1e3&&r.length<4))return t;var a=(new Date).getTime(),o=Math.floor(4*Math.random()),c={position:{x:P[o],y:-1100},createdAt:(new Date).getTime(),id:a};return Object(s.a)(Object(s.a)({},t),{},{gameState:Object(s.a)(Object(s.a)({},t.gameState),{},{flyingObjects:[].concat(Object(rt.a)(t.gameState.flyingObjects),[c]),lastObjectCreatedAt:new Date})})}(t),a=(new Date).getTime(),o=r.gameState.flyingObjects.filter((function(t){return a-t.createdAt<4e3})),c=t.gameState.flyingObjects.length>o.length,l=t.gameState.lives;c&&l--;var u=l>0;u||(o=[],n=[],l=3);var x=i.x,j=i.y,d=h(0,0,x,j),y=ot(n,o),f=y.map((function(t){return t.cannonBallId})),b=y.map((function(t){return t.flyingDiscId}));n=n.filter((function(t){return f.indexOf(t.id)})),o=o.filter((function(t){return b.indexOf(t.id)}));var p=t.gameState.kills+b.length;return Object(s.a)(Object(s.a)({},r),{},{gameState:Object(s.a)(Object(s.a)({},r.gameState),{},{flyingObjects:o,cannonBalls:Object(rt.a)(n),lives:l,started:u,kills:p}),angle:d})},st=function(t,e){return Object(s.a)(Object(s.a)({},t),{},{gameState:Object(s.a)(Object(s.a)({},e),{},{started:!0})})};var lt=function(t,e){if(!t.gameState.started)return t;var n=t.gameState.cannonBalls;if(2===n.length)return t;var i=e.mousePosition,r=i.x,a=i.y,o={position:{x:0,y:0},angle:h(0,0,r,a),id:(new Date).getTime()};return Object(s.a)(Object(s.a)({},t),{},{gameState:Object(s.a)(Object(s.a)({},t.gameState),{},{cannonBalls:[].concat(Object(rt.a)(n),[o])})})},ut={started:!1,kills:0,lives:3,flyingObjects:[],lastObjectCreatedAt:new Date,currentPlayer:null,players:null,cannonBalls:[]},xt={angle:45,gameState:ut};var jt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case tt:return Object(s.a)(Object(s.a)({},t),{},{players:e.players});case et:return Object(s.a)(Object(s.a)({},t),{},{currentPlayer:e.player});case Z:return ct(t,e);case $:return st(t,ut);case nt:return lt(t,e);default:return t}},dt=Object(Q.a)(jt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());c.a.render(Object(O.jsx)(q.a,{store:dt,children:Object(O.jsx)(it,{})}),document.getElementById("root")),K()}},[[93,1,2]]]);
//# sourceMappingURL=main.fc370487.chunk.js.map